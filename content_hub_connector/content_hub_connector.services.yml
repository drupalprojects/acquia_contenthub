services:
  content_hub_connector.entity_manager:
    class: Drupal\content_hub_connector\EntityManager
    arguments: ['@logger.factory', '@config.factory', '@content_hub_connector.client_manager']
  content_hub_connector.client_manager:
    class: Drupal\content_hub_connector\Client\ClientManager
    arguments: ['@logger.factory', '@config.factory']
  content_hub_connector.normalizer.entity.content_hub_cdf:
    class: Drupal\content_hub_connector\Normalizer\ContentEntityNormalizer
    arguments: ['@config.factory', '@content_hub_connector.content_entity_view_modes_extractor', ]
    tags:
      - { name: normalizer, priority: 10 }
  content_hub_connector.content_entity_view_modes_extractor:
    class: Drupal\content_hub_connector\ContentEntityViewModesExtractor
    arguments: ['@config.factory', '@entity_display.repository', '@entity_type.manager', '@renderer']
    tags:
      - { name: normalizer, priority: 10 }
  content_hub_connector.encoder.content_hub_cdf:
    class: Drupal\content_hub_connector\Encoder\JsonEncoder
    tags:
      - { name: encoder, priority: 10, format: content_hub_cdf }
  content_hub_connector.exception.default_json:
    class: Drupal\content_hub_connector\EventSubscriber\ExceptionCdfJsonSubscriber
    tags:
      - { name: event_subscriber }
